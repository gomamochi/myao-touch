function c(a){return"res/se/"+a+".mp3"}function h(a){return"res/image/"+a+".png"}var n={R:c("don1"),S:c("don2"),aa:c("waraji"),Z:c("takoyaki"),Y:c("nomuyo"),X:c("nolife"),U:c("mechashiko"),P:c("dekirujan"),N:c("chicchai"),M:c("bat"),V:c("miyao")},p={T:h("manual"),O:h("credit"),W:h("maidAtlas"),J:h("maid"),K:h("gym")};var r={x:0,y:0},t={x:9999,y:0};function u(a,b){return Math.random()*(b-a)+a}var aa=null;
function ba(a){var b=2*Math.PI/5,d=u(0,Math.PI),f,e;for(f=0;5>f;++f){var g=a,k=d+b*f+u(0,b/2);e=v(ca);e.attr({x:g.x+Math.cos(k)*u(0,6),y:g.y+Math.sin(k)*u(0,6),scale:u(.75,1.5),rotation:u(0,360)});g=new cc.Point(g.x,g.y);g.x+=32*Math.cos(k);g.y+=32*Math.sin(k);k=cc.Spawn.create(cc.EaseSineOut.create(cc.MoveTo.create(w,g)),cc.FadeOut.create(w));k=cc.Sequence.create(k,new cc.RemoveSelf(!0));e.runAction(k);aa.addChild(e,999)}}function da(){return aa=cc.Node.create()}
var x=!1,y=null,z=null,A=null,B=null,C=null,D=!1;
function ea(){var a=v("buta");a.setOpacity(0);a.setAnchorPoint(new cc.Point(.5,0));a.setPosition(new cc.Point(236,0));a.runAction(cc.FadeIn.create(2));aAction=cc.Sequence.create(cc.DelayTime.create(1/30),cc.CallFunc.create(function(a){a.setScale(.6+Math.sin((new Date).getTime()/600)/20)},a));a.runAction(cc.RepeatForever.create(aAction));cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,d){var f=d.getCurrentTarget(),e;f.convertToNodeSpace(a.getLocation());
e=a.getLocation();f=f.getBoundingBox();return cc.rectContainsPoint(f,e)?(E(),fa(),!0):!1}},a);return a}function ga(){function a(a){var f=new cc.Sprite;f.setPosition(t);f.setAnchorPoint(r);b.addChild(f,a);return f}var b=new cc.Sprite(p.J);y=b;z=a(1);A=a(2);B=a(3);C=a(4);ia();return b}function ja(){z.setPosition(t);A.setPosition(t);B.setPosition(t);C.setPosition(t)}function F(a){G(z,a)}function H(a){G(A,a)}function ka(a){G(B,a)}function I(a){G(C,a)}
function J(a,b,d,f,e){void 0!==b.B&&(d=b.D,f=b.A,e=b.C,b=b.B);b=new cc.Point(b,d);d=new cc.Sprite;d.setTextureRect(new cc.Rect(0,0,f,e));d.setPosition(b);d.setAnchorPoint(r);d.setOpacity(0);d.setName(a);y.addChild(d,0)}
function ia(){var a={B:98,D:0,A:22,C:20},b={B:71,D:30,A:26,C:28},d={B:44,D:104,A:26,C:30};J("foot",a);J("foot",256-a.B-a.A,a.D,a.A,a.C);J("hand",b);J("hand",256-b.B-b.A,b.D,b.A,b.C);J("head",{B:57,D:180,A:140,C:68});J("mouth",{B:115,D:85,A:26,C:24});J("bust",{B:107,D:52,A:44,C:24});J("hip",{B:100,D:22,A:56,C:24});J("ear",d);J("ear",256-d.B-d.A,d.D,d.A,d.C)}
function fa(){var a=y,b=a.getTexture(),d=new cc.Sprite(b);d.setName("");d.setPosition(r);d.setAnchorPoint(r);var f=cc.Sequence.create(cc.FadeOut.create(1),new cc.RemoveSelf(!0));d.runAction(f);a.addChild(d,10);b=b==cc.textureCache.getTextureForKey(p.K)?p.J:p.K;a.setTexture(b)}function la(a){a=y.convertToNodeSpace(a);for(var b=y.getChildren(),d=0;d<b.length;d++){var f=b[d].getBoundingBox();if(cc.rectContainsPoint(f,a))return b[d]}return null}
function K(){function a(d){return cc.Sequence.create(cc.CallFunc.create(function(){ja()},d),cc.DelayTime.create(Math.floor(6*Math.random())+1),cc.CallFunc.create(function(){ka(L);I(M)},d),cc.DelayTime.create(u(.05,.1)),cc.CallFunc.create(function(b){b.runAction(a(b))},b))}var b=y,d=a(b);b.stopAllActions();b.runAction(d)}
function ma(){function a(){return cc.Sequence.create(cc.CallFunc.create(function(){ka(na);I(M);F(oa);H("kuti_pero")}),cc.DelayTime.create(u(.5,1)),cc.CallFunc.create(function(){I(N);F("ho_giza");H("cat")}),cc.MoveTo.create(.05,new cc.Point(f+1,e)),cc.MoveTo.create(.1,new cc.Point(f-1,e)),cc.MoveTo.create(.1,new cc.Point(f+1,e)),cc.MoveTo.create(.1,new cc.Point(f-1,e)),cc.MoveTo.create(.05,new cc.Point(f,e)),cc.CallFunc.create(function(b){var d=O;d.target&&d.H&&64>=d.G&&2500<=(new Date).getTime()-
d.F[d.F.length-1]&&Q(pa[O.target.getName()],O.target.parent,O.I)?O.target=null:b.runAction(a())},b))}var b=y,d=cc.winSize,f=d.width/2,e=d.height/2,d=a();b.stopAllActions();b.runAction(d)}var qa=null;function ra(a){var b=cc.Sequence.create(cc.DelayTime.create(1/30),cc.CallFunc.create(function(a){a.setScale(1+(1+Math.sin((new Date).getTime()/300))/8)},a));a.runAction(cc.RepeatForever.create(b))}
function sa(){var a=cc.Node.create();qa=a;for(var b=0;7>b;b++){var d=24+20*(7-b),f=.25*(7-b)/2,e=v(ta);e.setPosition(new cc.Point(12,d));e.setOpacity(0);d=cc.Sequence.create(cc.DelayTime.create(f),cc.FadeIn.create(.25));e.runAction(d);sprite=e;a.addChild(sprite,0)}ra(a.children[0]);return a}
function ua(){if(D)D=!1;else{var a=qa.getChildren(),b=a[0];b&&((a=a[1])&&ra(a),a=cc.Sequence.create(cc.FadeOut.create(w),cc.CallFunc.create(function(a,b){if(!b){fa();var e=cc.director.getRunningScene().getChildByName("main");e&&(R(y,[[0,S,n.P],[,T,"a"],[300,T,"e"],[500,T,"a"],[700,T,"e"],[900,T,"i"],[1100,T,"u"],[1300,T,"a"],[,U,va],[1800,T],[,U],[,V,L],[1900,V],[2550,T,"i"],[,U,M],[,W,wa],[,V,xa],[2700,T,"a"],[2850,T,"o"],[3E3,T,"i"],[3200,T,"a"],[3500,T]]),e.addChild(ea(),999));O.L=!0}},b,a),new cc.RemoveSelf(!0)),
b.stopAllActions(),b.runAction(a))}}function ya(a,b){var d=[],f=0;for(i=0;i<a.length;i+=1){var e=a[i][0],g=a[i][1];void 0!==e&&(f=e-f,0<f&&d.push(cc.DelayTime.create(f/1E3)),f=e);e=function(e){d.push(cc.CallFunc.create(function(a,b){e(b)},b,a[i][2]))};g==S?d.push(cc.CallFunc.create(function(a,b){X&&(X.stop(),X=null);cc.audioEngine.playMusic(b)},b,a[i][2])):g==T?e(H):g==V?e(ka):g==U?e(I):g==W&&e(F)}d.push(cc.CallFunc.create(function(){K();ua();x=!1},b));return d}
var oa="ho_maru",wa="ho_ten",L="me_close",na="me_charm",xa="me_nico",N="mayu_mu",M="mayu_down",va="mayu_up",za=0,Aa=0,ca="star",ta="heart";
function Ba(){2!=Aa&&(za={a:[{x:120,y:87},{x:233,y:151,width:17,height:18}],i:[{x:106,y:90},{x:210,y:212,width:46,height:12}],u:[{x:120,y:90},{x:233,y:107,width:17,height:12}],e:[{x:113,y:88},{x:210,y:169,width:32,height:15}],o:[{x:120,y:88},{x:154,y:116,width:16,height:15}],cat:[{x:113,y:89},{x:210,y:224,width:32,height:18}],heart:[{x:0,y:0},{x:233,y:119,width:16,height:16}],star:[{x:0,y:0},{x:233,y:135,width:16,height:16}],guideButton:[{x:0,y:0},{x:0,y:64,width:80,height:24}],ho_giza:[{x:78,y:92},
{x:0,y:110,width:103,height:22}],ho_naruto:[{x:78,y:92},{x:103,y:93,width:103,height:22}],ho_maru:[{x:78,y:92},{x:0,y:88,width:103,height:22}],ho_ten:[{x:78,y:92},{x:103,y:71,width:103,height:22}],mayu_up:[{x:78,y:147},{x:80,y:55,width:103,height:16}],mayu_down:[{x:78,y:147},{x:103,y:25,width:103,height:15}],mayu_nico:[{x:78,y:147},{x:0,y:25,width:103,height:15}],mayu_mu:[{x:78,y:147},{x:103,y:40,width:103,height:15}],me_down:[{x:75,y:115},{x:0,y:225,width:105,height:31}],me_close:[{x:75,y:115},{x:0,
y:132,width:105,height:31}],me_nico:[{x:75,y:115},{x:105,y:163,width:105,height:31}],me_charm:[{x:75,y:115},{x:0,y:163,width:105,height:31}],me_ten:[{x:75,y:115},{x:105,y:194,width:105,height:31}],me_fish:[{x:75,y:115},{x:0,y:194,width:105,height:31}],me_nemu:[{x:75,y:115},{x:105,y:225,width:105,height:31}],kuti_evil:[{x:102,y:88},{x:103,y:8,width:53,height:17}],mayu_oko:[{x:78,y:147},{x:0,y:40,width:103,height:15}],mayu_komaru:[{x:78,y:147},{x:0,y:10,width:103,height:15}],kuti_pero:[{x:113,y:90},
{x:210,y:184,width:31,height:16}],kuti_mu:[{x:105,y:90},{x:210,y:200,width:44,height:12}],kuti_aww:[{x:106,y:89},{x:210,y:242,width:44,height:14}],kuti_nii:[{x:103,y:91},{x:103,y:118,width:51,height:13}],playButton:[{x:0,y:0},{x:105,y:131,width:80,height:32}],buta:[{x:0,y:0},{x:185,y:115,width:48,height:48}]},Aa=2)}function v(a){var b=new cc.Sprite;G(b,a);return b}
function G(a,b){var d=za[b];void 0===d?a.setPosition(t):(a.setTexture(cc.textureCache.getTextureForKey(p.W)),a.setTextureRect(d[1]),a.setPosition(d[0]))}var w=1/3,Y={},Ea={head:Ca,hand:Da},Ia={foot:Fa,bust:Ga,ear:Ha},Ka={hip:Ja},pa={mouth:La},O={G:0,target:null,F:[],H:!1,I:0,L:!1};function Q(a,b,d){return a&&!Y[a]?(ja(),Y[a]=!0,a(b),ba(d),!0):!1}function R(a,b){var d=ya(b,a);d&&(a.stopAllActions(),a.runAction(cc.Sequence.create(d)),x=!0)}var S=1,T=2,V=3,W=4,U=5;
function Fa(a){R(a,[[0,S,n.aa],[,V,"me_fish"],[,U,"mayu_komaru"],[,T,"u"],[250,T,"i"],[450,T,"a"],[600,T,"e"],[700,T],[1450,T,"a"],[,V,"me_nemu"],[,U,"mayu_oko"],[,W,"ho_giza"],[1600,T,"o"],[1750,T,"i"],[1850,T,"o"],[2E3,T,"a"],[,V,xa],[2100,T,"o"],[2200,T,"a"],[2300,T,"u"],[2450,T,"e"],[2550,T,"o"],[2650,T,"i"],[2800,T,"a"],[2850,T,"i"],[3E3,T,"a"],[3250,T]])}
function La(a){R(a,[[0,S,n.Y],[,T,"a"],[,V,"me_nemu"],[,U,"mayu_komaru"],[,W,wa],[200,T,"o"],[300,T,"e"],[450,T,"o"],[600,T,"a"],[850,T,"o"],[950,T],[1100,T,"a"],[1250,T,"i"],[1400,T,"a"],[1500,T,"i"],[1650,T,"o"],[1750,T,"a"],[2100,T],[,V,L],[3E3,T,"o"],[,V,na],[3250,T,"u"],[3450,T,"o"],[3900,T]])}function Da(a){R(a,[[0,S,n.U],[,T,"e"],[,W,wa],[200,T,"a"],[350,T,"i"],[400,U,N],[500,V,L],[600,T,"o"],[950,T]])}
function Ca(a){R(a,[[0,S,n.N],[,T,"i"],[,V,"me_ten"],[,U,"mayu_komaru"],[100,T],[200,T,"a"],[300,T,"kuti_nii"],[550,T,"e"],[,U,"mayu_oko"],[650,T,"u"],[800,T,"o"],[1200,T],[1250,T,"o"],[,V],[,W,"ho_naruto"],[,U,N],[1400,T],[1450,T,"i"],[1550,T,"e"],[1650,T,"a"],[1850,T,"i"],[1950,T,"u"],[,V,"me_down"],[2050,T,"a"],[2450,T,"u"],[2600,T]])}
function Ga(a){R(a,[[0,S,n.X],[,V,L],[,U,va],[,T,"u"],[100,T,"o"],[250,T,"a"],[400,T,"i"],[500,T,"a"],[650,T],[850,T,"u"],[1E3,T],[,V],[1150,T,"u"],[1250,T,"o"],[1400,T,"a"],[,U],[1500,T,"i"],[1700,T,"u"],[1900,T]])}
function Ja(a){R(a,[[0,S,n.M],[,T,"e"],[,V,"me_down"],[,U,"mayu_komaru"],[200,T,"u"],[300,T,"a"],[400,T],[550,T,"o"],[800,T],[,V],[,U],[950,T,"u"],[1150,T,"o"],[1300,T,"i"],[1450,T,"u"],[1500,T,"o"],[,U,N],[1600,T,"e"],[1700,T,"a"],[1750,T,"i"],[1800,T,"e"],[2E3,T,"a"],[2150,T,"u"],[2500,T]])}
function Ha(a){R(a,[[0,S,n.Z],[,T,"a"],[,V,"me_fish"],[,U,N],[,W,"ho_naruto"],[200,T,"o"],[300,T,"a"],[350,T,"kuti_evil"],[550,T,"u"],[700,T,"e"],[800,T,"a"],[900,T,"o"],[,U,"mayu_oko"],[1100,T,"a"],[1450,T]])}function Ma(){return function(){function a(a,e,g,k){a=cc.LayerColor.create(d,a,e);a.setPosition(g,k);b.addChild(a)}var b=cc.Node.create(),d=new cc.Color(0,0,153,255);a(1,256,0,0);a(1,256,255,0);a(256,1,0,0);a(256,1,0,255);return b}()}
var Oa=cc.Layer.extend({ctor:function(){this._super();this.setName("main");var a=cc.winSize,b=ga();b.setPosition(new cc.Point(a.width/2,a.height/2));this.addChild(b,0);b.addChild(da(),10);this.addChild(Ma(),1);Ba();this.addChild(Na());this.addChild(sa(),0);K();cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(a,b){if(x)return!1;var e=b.getCurrentTarget(),g=e.convertToNodeSpace(a.getLocation()),k=la(a.getLocation());if(null==k)return!1;var P=k.getName();if(""==
P)return!1;for(var q=[Ea,Ia,Ka,pa],m=0;m<q.length;m++)if(Y[q[m][P]])if(O.L)Y[q[m][P]]=!1;else return!1;q=(new Date).getTime();O.target!=k?O.F=[q]:O.F.push(q);q=O.F.length;if(3<=q&&1E3>=O.F[q-1]-O.F[q-3]&&Q(Ka[P],e,g))return!1;E();ba(g);O.G=0;O.target=k;O.H=!0;O.I=g;ma();return!0},onTouchMoved:function(a,b){var e=b.getCurrentTarget(),g=e.convertToNodeSpace(a.getLocation());O.G+=Math.sqrt(Math.pow(a.getDelta().x,2)+Math.pow(a.getDelta().y,2));O.I=g;var k=la(a.getLocation());null===k?O.H=!1:k==O.target?
180<O.G&&Q(Ea[k.getName()],e,g)&&(O.target=null):O.H=!1},onTouchCancelled:function(){K()},onTouchEnded:function(a,b){if(O.target){var e=b.getCurrentTarget(),g=e.convertToNodeSpace(a.getLocation()),k=la(a.getLocation());if(k&&(k.getName(),k==O.target&&(O.I=g,Q(Ia[k.getName()],e,g))))return;K()}}},b);D=!0;R(y,[[0,S,n.V],[,T,"i"],[,W,oa],[100,T,"a"],[200,T,"o"],[350,T,"i"],[400,T,"a"],[500,T,"o"],[700,T,"u"],[,U,M],[,V,L],[850,T,"o"],[,U],[,V],[950,T,"u"],[1050,T,"i"],[,U],[1200,T,"a"],[1350,T,"u"],
[1600,T,"o"],[,U,va],[1700,T,"a"],[1900,T,"i"],[2100,T]]);return!0}}),Pa=cc.Scene.extend({onEnter:function(){this._super();var a=new Oa;this.addChild(a)}});function Qa(a){var b=cc.loader.getRes(a);b||(cc.loader.load(a),b=cc.loader.getRes(a));return b}var X=null,Ra=[n.R,n.S];function E(){X&&(X.stop(),X=null);X=Qa(Ra[Math.floor(2*Math.random())+0]);X.play()}var Z=null,Sa=null,Ta=null,Ua=null;
function Na(){var a=v("guideButton"),b=a.getTextureRect();a.setPosition(new cc.Point(4+b.width/2,4+b.height/2));a.setOpacity(0);a.runAction(cc.FadeIn.create(1));cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){var e=b.getCurrentTarget(),g=e.convertToNodeSpace(a.getLocation()),g=a.getLocation(),k=e.getBoundingBox();return cc.rectContainsPoint(k,g)?(E(),g=cc.Sequence.create(cc.DelayTime.create(1/30),cc.CallFunc.create(function(a){var b=
(0+Math.sin((new Date).getTime()/150))/24;a.setScale(1+b,1-b)},e)),e.stopAllActions(),e.setOpacity(255),e.runAction(cc.RepeatForever.create(g)),!0):!1},onTouchMoved:function(){},onTouchCancelled:function(a,b){var e=b.getCurrentTarget();e.stopAllActions();e.setScale(1)},onTouchEnded:function(a,b){var e=b.getCurrentTarget();e.stopAllActions();e.setScale(1);var g;e.convertToNodeSpace(a.getLocation());g=a.getLocation();e=e.getBoundingBox();if(cc.rectContainsPoint(e,g))return Va(),!0}},a);return a}
function Va(){var a=cc.director.getVisibleSize(),b=cc.director.getRunningScene(),d=new cc.Point(a.width/2,a.height/2);if(null==Z){Z=cc.Layer.create();(function(){var b=new cc.Sprite;b.setTextureRect(new cc.Rect(0,0,a.width,a.height));b.setAnchorPoint(r);b.setColor(new cc.Color(0,0,0,0));b.setOpacity(0);Z.addChild(b);Ua=b})();var f=function(b){b=new cc.Sprite(b);b.setPosition(a.width/2,a.height/2+a.height);Z.addChild(b);return b};Sa=f(p.T);Ta=f(p.O)}cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,
swallowTouches:!0,onTouchBegan:function(a,b){for(var d=b.getCurrentTarget(),f=Sa,q=Ta,m=d.getChildren(),ha=0;ha<m.length;ha++)if(0<m[ha].getNumberOfRunningActions())return!0;m=d.convertToNodeSpace(a.getLocation());m=a.getLocation();cc.rectContainsPoint(f.getBoundingBox(),m)?(E(),m=f.getPosition(),m.y-=cc.director.getVisibleSize().height,f.runAction(cc.EaseBackOut.create(cc.MoveTo.create(.5,m))),m=q.getPosition(),m.y-=cc.director.getVisibleSize().height,q.runAction(cc.EaseBackOut.create(cc.MoveTo.create(.5,
m)))):cc.rectContainsPoint(q.getBoundingBox(),m)&&(E(),m=q.getPosition(),m.y-=cc.director.getVisibleSize().height,q.runAction(cc.EaseBackOut.create(cc.MoveTo.create(.5,m))),Ua.runAction(cc.Sequence.create(cc.FadeTo.create(.5,0),cc.CallFunc.create(function(){cc.eventManager.pauseTarget(d);d.removeFromParent()},d))));return!0},onTouchMoved:null,onTouchCancelled:null,onTouchEnded:null},Z);(function(){var e=Sa,f=Ta;Ua.runAction(cc.FadeTo.create(.5,128));e.setPosition(new cc.Point(a.width/2,a.height/2+
a.height));e.runAction(cc.EaseBackOut.create(cc.MoveTo.create(.5,d)));f.setPosition(new cc.Point(a.width/2,a.height/2+a.height));b.addChild(Z);cc.eventManager.resumeTarget(Z)})()}
var Wa=cc.Layer.extend({ctor:function(){this._super();Ba();var a=cc.winSize,a=new cc.Point(a.width/2,a.height/2),b=new cc.Sprite(p.J);b.setPosition(a);this.addChild(b);this.addChild(Ma());var b=new cc.Color(0,0,0,255),d=cc.LayerColor.create(b,256,256);this.addChild(d);var f=v("playButton");f.setPosition(a);this.addChild(f);a=cc.Sequence.create(cc.DelayTime.create(1/30),cc.CallFunc.create(function(a){a.setScale(1+(1+Math.sin((new Date).getTime()/300))/40)},f));f.runAction(cc.RepeatForever.create(a));
var e=!1;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(){if(!e){e=!0;for(var a in n){var b=Qa(n[a]);b.setVolume(0);b.play();b.setVolume(0);b.stop();b.setVolume(1)}setTimeout(function(){cc.director.runScene(new Pa)},1E3);f.runAction(cc.FadeOut.create(1));d.runAction(cc.FadeOut.create(1));return!0}}},this);return!0}}),Xa=cc.Scene.extend({onEnter:function(){this._super();var a=new Wa;this.addChild(a)}});
window.startMiyaoGame=function(){cc.game.onStart=function(){cc.view.adjustViewPort(!1);cc.view.setDesignResolutionSize(256,256,cc.ResolutionPolicy.SHOW_ALL);cc.view.resizeWithBrowserSize(!0);cc._loaderImage=cc._loadingImage;var a=[],b;for(b in p)a.push(p[b]);for(b in n)a.push(n[b]);cc.LoaderScene.preload(a,function(){cc.director.runScene(new Xa)},this)};cc.game.run("gameCanvas")};
